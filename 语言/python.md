## Python

- 适合脚本处理
- 简单易用
- 支持全平台
- 模块化
- 解释型语言
- 使用缩进
- 可扩展

### 解释器

Python 的执行环境，各个操作系统都可以安装
可以执行python文件或者使用交互模式
进入交互模式命令：`python`
退出交互模式命令：`exit()`

### 速览

注释：`#`开头，直到该物理行结束

数字：
- 使用运算符：+、-、*、/等
- ** 计算乘方（平方）
- = 赋值

字符串：
- '' 或 "" 标注
- \ 用于转义
- 三重引号：'''xx''' 或 """xx""" 可以实现多行
- 用 + 合并，用 * 重复
- 字符串支持下标访问，并支持负数（从右往左计数）
- 支持切片，切片提取子字符串，如：`[0:2]`
- 不能修改的，为字符串中的某个索引位置赋值会报错
- `len()` 内置函数返回字符串长度

列表：

- 方括号标注，逗号分隔：[1, 2, 3]
- 列表可以包含不同类型的元素，一般情况下，类型相同
- 支持索引和切片（切片会返回列表的浅拷贝）
- 支持使用 + 合并
- 内容可该表，即使用索引改变里面的某个下标的值
- 为切片赋值可以改变列表大小
- `len()` 内置函数返回嵌套长度
- 列表可以嵌套

### 流程控制

if 语句

判断
`if`
`elif`
`else`
在交互模式中需要使用`:`

for 语句

循环
`for x in xList:`

注意：遍历集合修改集合内容容易造成错误结果，应该便利集合副本（copy()）或创建新集合

range() 函数

用于遍历数字序列，可以生成算数级数，例如：
`range(5)` '[0, 1, 2, 3, 4]'
`range(5, 10)` '[5, 6, 7, 8, 9]'
`range(0, 10, 3)` '[0, 3, 6, 9]'

range() 迭代时基于所需序列返回连续项，并没有生成真实的列表，这种对象称为可迭代对象 `iterrable`

break、continue、else 子句

- break
  - 跳出 for 或 while 循环
- else
  - 作用于循环语句，当循环全部循环完毕
  - while 循环的条件为假时，执行该子句
  - *break终止循环时，不执行*
- continue
  - 继续执行循环的下一次迭代

pass 语句

- 不执行任何操作
- 语法上需要一个语句，但程序实际不执行任何动作
- 用作函数或条件子句的占位符

match 语句

- 模式匹配，类似于 switch
- 仅执行第一个匹配的模式
- 可以将值提取到变量中

```
def http_error(status):
    match status:
        case 400:
            return "Bad request"
        case 404 | 401 | 403:
            return "Not found"
        case 418:
            return "I'm a teapot"
        case _:
            return "Something's wrong with the internet"
```

- '_' 被作为通配符必定会匹配成功
- '|' 可以组合多个字面值
- 可以解包赋值，并被用于绑定变量


*有一些难理解的知识点，后续再看下*

### 函数

定义

```
>>> def fib(n):
...     """Print a Fibonacci series up to n."""
...     a, b = 0, 1
...     while a < n:
...             print(a, end= ' ')
...             a, b = b, a + b
...     print()
...
>>> fib(100)
```

- `def` 关键字
- 后面跟函数名与括号内的形参列表
- 函数语句从下一行开始，并且必须缩进
- 函数内的第一条语句是字符串时，该字符串就是文档字符串（docstring），用于在线文档生成
- 函数变量查找顺序：局部符号表 -> 外层符号表 -> 全局符号表 -> 内置符号表
- 调用函数时会将实际参数引入到函数的局部符号表中（实参是*按值调用*传递，即对象是引用）
- `return` 语句返回函数的值，不带表达式参数时，返回 `None` 

参数值

1. 默认值参数
`def ask_ok(prompt, retries=4, reminder='Please try again!'):`
这样在传参时后两个可传可不传，不传使用默认值
默认值在 *定义* 作用域里的函数定义中求值
默认值只计算一次，当默认值为列表、字典或类实例等可变对象时，会产生不同结果

2. 关键字参数
`def parrot(voltage, state='a stiff', action='voom', type='Norwegian Blue'):`
`kwarg=value` 形式的 关键字参数 也可用于调用函数
调用方式：`parrot(voltage=1000000, action='VOOOOOM') `
所有传递的关键字参数都必须匹配一个函数接受的参数
非有序性
不能对同一个参数多次赋值
形参为`**name`形式，接收一个字典， 包含与函数中已定义形参对应之外的所有关键词参数
形参为`*name`形式，接收一个元组，包含形参列表之外的位置参数

3. 特殊参数
默认情况下，参数可以按照位置或显示关键字传递给Python函数
为确定参数项是仅按位置、按位置或关键字、仅按关键字传递，函数定义如下：
`def f(pos1, pos2, /, pos_or_kwd, *, kwd1, kwd2):`
'/'  和 '*' 可选

- 位置或关键字参数
  - 未使用 / 和 * 时，位置或关键字传递都可以
  - / 表示其之前的形参都是位置参数，其顺序很重要
  - '*' 标识其之后的形参都是关键字参数
  - / 之后 和 '*' 之前的参数两者都可

Lambda 表达式

用于创建小巧的匿名函数
`lambda a, b: a+b` 函数返回两个参数的和

文档字符串

- 第一行应为对对象用途的简短摘要
- 大写字母开头，句点结尾
- 多行时，第二行为空白行，后面的行可包含若干段落
- 查看：fun_name.`__doc__`

```
>>> def my_function():
...     """
...     Do nothing, but document it.
...
...     No, really, it doesn't do anything.
...     """
...     pass
```

编码风格

- 缩进，用 4 个空格，不要用 制表符
- 换行，一行不要超过 79 个字符
- 用空行分隔函数和类，以及函数内较大的代码块
- 注释尽量单独一行
- 使用文档字符串
- 运算符前后使用空格
- ...

### 数据结构

列表

list 方法
- list.append(x)
- list.extend(iterable)
- list.insert(i, x)
- list.remove(x)
- list.pop([i])
- list.clear()
- list.index(x[, start[, end]])
- list.count(x)
- list.sort(*, key=None, reverse=False)
- list.reverse()
- list.copy()

list 应用

- 有序数组
- 栈
- 队列（慢，插入头时）
  
列表推导式

对序列或可迭代对象的每个元素应用某种操作，用生成的结果创建新的列表
用满足特定条件的元素创建子序列

1. 基础
`squares = [x**2 for x in range(20)]`
其中变量x会被创建和覆盖，循环结束后仍然存在

2. 嵌套
`[[row[i] for row in matrix] for i in range(4)]`

del

1. 按索引或切片删除列表元素 `del a[0]` `del a[2:4]`
2. 可以清空整个列表 `del a[:]`
3. 删除变量（之后再引用会报错） `del a`

元组和序列

元组：
- 标准序列类型（序列类型：list：列表、tuple：元组、range：值域）
- 元组由多个用逗号隔开的值组成
- 输出时，元组由圆括号标注，用以解释嵌套元组
- 不允许为元组的单个元素赋值，但可以创建含列表等可变对象的元组
- 元组是 immutable（不可变的），一般可包含异质元素序列，通过解包或索引访问
- 列表是 nutable（可变的），列表元素一般为同质类型，可迭代访问
- 0个元素的元组使用一对()创建，一个元素的元组通过加逗号来构建
- 元组可以进行打包（下面的t），也可以进行序列解包，如`x, y, z = t`
```
>>> t = 12345, 543, 'hello'
>>> t[0]
12345
>>> t
(12345, 543, 'hello')
>>>
>>> t[0] = 123
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'tuple' object does not support item assignment
>>> u = t, (1, 2, 3)
>>> u
((12345, 543, 'hello'), (1, 2, 3))
```

集合

- 由不重复元素组成的无序容器
- 基本方法包括成员检测、消除重复元素
- 支持合集、交集、差集等数学计算
- 创建集合使用花括号或`set()`函数
- 创建空集合只能用`set()`，不能用 `{}`，`{}`创建的是空字典
- 支持 列表推导式

```
>>> basket = {'a', 'b', 'c', 'd'}
>>> basket
{'a', 'b', 'd', 'c'}
>>> a in basket
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'a' is not defined
>>> 'a' in basket
True
>>> 'e' in basket
False
>>>
>>> a = set('abcd'
... )
>>> b = set('cdef')
>>> a - b  # 只属于a的
{'a', 'b'}
>>> a | b  # 并集
{'f', 'e', 'a', 'b', 'c', 'd'}
>>> a & b  # 交集
{'c', 'd'}
>>> a ^ b  # 差集
{'e', 'a', 'b', 'f'}
```

字典

- 映射类型 - dict
- 以 *关键字* 为索引，关键字通常为字符或数字（或其他任何不可变类型）
- 元组作为关键字时不能直接或间接包含可变对象；列表不能当关键字
- *键值对* 的集合，键必须唯一，`{}`用于创建空字典，或花括号里输入逗号分隔的键值对
- 用途：通过关键字存储、提取值，`del` 可以删除键值对

```
>>> tel = {'jack' : 4098, 'sape' : 4139}
>>> tel
{'jack': 4098, 'sape': 4139}
>>> tel['jack']
4098
>>> del tel['sape']
>>> tel['irv'] = 4127
>>> tel
{'jack': 4098, 'irv': 4127}
>>> list(tel)
['jack', 'irv']
>>> tel['guido'] = 4128
>>> sorted(tel)
['guido', 'irv', 'jack']
>>> 'guido' in tel
True
>>> 'jack' in tel
True
>>>
>>> dictTemp = dict([('sape', 3333), ('jack', 5555)]) # 用dict()构造函数创建字典
>>> dictTemp
{'sape': 3333, 'jack': 5555}
```

循环的技巧

1. 用 items() 方法可以同时提取出字典的键和值
`for k, v in knights.items():`

2. 序列循环中，用 `enumerate()` 可以同时取出索引位置和值
`for i, v in enumerate(['tic', 'tac', 'toe']):`

3. 同时循环多个序列时，用 `zip()` 函数将元素一一匹配

4. 逆向循环序列时，先正向定位序列，然后用 `reversed()` 函数

5. 用 `sorted()` 函数可以在不改动原有序列的基础上排序生成新的序列

6. `set()` 可以去除序列中的重复元素

### 模块

1. Python 编辑器定义的函数和变量在退出重进后会丢失
2. 编写长程序建议使用文本编辑器，即执行脚本文件
3. 拆分多个文件，并且在函数调用时不用复制到各处去

为满足上述需求，Python 将各种定义存入到一个文件，在脚本或解释器的交互式实例中使用，这个文件就是模块

模块中的定于可以导入到其他模块或主模块

模块是包含 Python 定义和语句的文件，文件名是模块名加后缀名 `.py`
模块内部，通过全局变量 `__name__` 可以获取模块名（字符串）

